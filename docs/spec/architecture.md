# Kingdom - Architecture Blueprint

> ë¹ˆ ì»´í“¨í„° í•œ ëŒ€ì— ì •ì°©í•˜ì—¬, íŒ€ì˜ ì¼ì›ìœ¼ë¡œ ì¼í•˜ëŠ” AI ë™ë£Œ

## ë¹„ì „

ë¹ˆ ì»´í“¨í„°(EC2, Mac ë“±) í•œ ëŒ€ì— ì…‹ì—…í•˜ë©´, íŒ€ì˜ GitHubÂ·JiraÂ·Slackì„ ê°ì‹œí•˜ë©°
ì£¼ì–´ì§„ ì—­í• (ì¥êµ° íŒ¨í‚¤ì§€)ì— ë”°ë¼ ìŠ¤ìŠ¤ë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” AI íŒ€ ë™ë£Œë¥¼ ë§Œë“ ë‹¤.
ì‚¬ëŒì—ê²Œ í™•ì¸ì´ í•„ìš”í•˜ë©´ Slackìœ¼ë¡œ ë¬¼ì–´ë³´ê³ , ì‘ì—…í•˜ë©° ë°°ìš´ ê²ƒì€ ë©”ëª¨ë¦¬ì— ì¶•ì í•˜ì—¬ ì ì  ë” ì˜ ì¼í•œë‹¤.
í•œë²ˆ ì“°ê³  ë²„ë¦¬ëŠ” PoCê°€ ì•„ë‹Œ, ê³„ì† ë°œì „ì‹œí‚¬ ì¥ê¸° í”„ë¡œì íŠ¸ì´ë‹¤.

### ì•„ì´ë´í‹°í‹°ì˜ 3ì¶•

| ì¶• | ì„¤ëª… | êµ¬í˜„ì²´ |
|---|------|--------|
| **ììœ¨ì„±** | ì´ë²¤íŠ¸ ê°ì§€ â†’ íŒë‹¨ â†’ ì‹¤í–‰ | íŒŒìˆ˜ê¾¼ + ì™• + ì¥êµ° + ë³‘ì‚¬ |
| **ì†Œí†µ** | ëª¨ë¥´ë©´ ë¬¼ì–´ë³´ê³ , ê²°ê³¼ë¥¼ ë³´ê³  | ì‚¬ì ˆ (Slack ì–‘ë°©í–¥) |
| **ì„±ì¥** | ì¼í•˜ë©° ë°°ìš°ê³ , ê²½í—˜ì„ ì¶•ì  | 3ê³„ì¸µ ë©”ëª¨ë¦¬ (Session â†’ Task â†’ Shared) |

### ê¸°ì¡´ ìë™í™”ì™€ì˜ ì°¨ì´

| ê¸°ì¡´ ìë™í™” (CI/CD, Actions) | Kingdom |
|------------------------------|---------|
| ê·œì¹™ ê¸°ë°˜ (if-then) | LLM ì¶”ë¡  ê¸°ë°˜ |
| ì½”ë“œë¥¼ ì‹¤í–‰ | ì½”ë“œë¥¼ ì½ê³ /ì“°ê³ /íŒë‹¨ |
| ë¹Œë“œÂ·í…ŒìŠ¤íŠ¸Â·ë°°í¬ íŒŒì´í”„ë¼ì¸ | ì‚¬ê³ ê°€ í•„ìš”í•œ ì‘ì—… (ë¦¬ë·°, êµ¬í˜„, í…ŒìŠ¤íŠ¸ ì‘ì„±) |
| íŠ¸ë¦¬ê±° â†’ ê³ ì • ë™ì‘ | íŠ¸ë¦¬ê±° â†’ ë§¥ë½ ì´í•´ â†’ ë™ì  ëŒ€ì‘ |
| ë©”ëª¨ë¦¬ ì—†ìŒ | 3ê³„ì¸µ ë©”ëª¨ë¦¬ë¡œ ê²½í—˜ ì¶•ì  |

### ì‘ì—… ë²”ìœ„

í˜„ì¬ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ì‘ì—…ì— ì§‘ì¤‘í•˜ì§€ë§Œ, ì¥êµ° íŒ¨í‚¤ì§€ ì‹œìŠ¤í…œì€ ë„ë©”ì¸ ë¬´ê´€í•˜ê²Œ ì„¤ê³„ë˜ì–´ ìˆë‹¤.
ìƒˆ watcher(ì´ë²¤íŠ¸ ì†ŒìŠ¤)ì™€ ì¥êµ° íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í•˜ë©´ ì§€ì‹ ë…¸ë™ ì „ë°˜ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥í•˜ë‹¤.

## êµ¬ì„± ì›ì¹™

| ì¸ê°„ì˜ ìš”ì†Œ | Kingdom ë§¤í•‘ | êµ¬í˜„ì²´ |
|------------|--------------|--------|
| ì§€ëŠ¥ | LLM + Prompt | Claude Code + Plugins/Skills |
| ê¸°ì–µ | Memory ê´€ë¦¬ | File-based Memory + CLAUDE.md |
| ëª¸ | í•˜ë“œì›¨ì–´ | EC2 / Mac / Cloud Instance |
| ì†ë°œ | ë„êµ¬ | CLI, MCP, GitHub, Jira, Slack |
| ì†Œí†µ | ì‚¬ì ˆ | Slack Web API (curl) |

## ì „ì²´ ì•„í‚¤í…ì²˜

```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   External Events    â”‚               â”‚     Slack (ì‚¬ëŒ)      â”‚
        â”‚   GitHub Â· Jira      â”‚               â”‚   DM Â· ìŠ¤ë ˆë“œ ì‘ë‹µ     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                                      â”‚
                   â”‚ events (JSON)                        â”‚ Slack Web API (curl)
                   â–¼                                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ° EC2 Instance  (M5.xlarge)                                    â”‚
    â”‚                                                                   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
    â”‚  â”‚   tmux: sentinel    â”‚          â”‚  tmux: envoy      â”‚          â”‚
    â”‚  â”‚   Polling Loop      â”‚          â”‚  Slack Web API    â”‚ â† ì‚¬ì ˆ   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
    â”‚           â”‚ event.json          â†— queue/messages/ ê°ì‹œ           â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”€â”€â”€â”€â”€â”˜                                 â”‚
    â”‚  â”‚   tmux: king        â”‚  â† ì™• (Orchestrator)                    â”‚
    â”‚  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                         â”‚
    â”‚     â”‚      â”‚      â”‚                                              â”‚
    â”‚  â”Œâ”€â”€â–¼â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”                                          â”‚
    â”‚  â”‚gen- â”‚â”‚gen- â”‚â”‚gen- â”‚  â† ì¥êµ° (Generals)                       â”‚
    â”‚  â”‚pr   â”‚â”‚test â”‚â”‚jira â”‚                                           â”‚
    â”‚  â””â”€â”€â”¬â”€â”€â”˜â””â”€â”€â”¬â”€â”€â”˜â””â”€â”€â”¬â”€â”€â”˜                                          â”‚
    â”‚     â”‚      â”‚      â”‚                                              â”‚
    â”‚  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”                                           â”‚
    â”‚  â”‚  tmux: soldiers   â”‚  â† ë³‘ì‚¬ (Workers)                        â”‚
    â”‚  â”‚  Claude Code Ã—N   â”‚                                           â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
    â”‚                                                                   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
    â”‚  â”‚  tmux: chamberlainâ”‚  â† ë‚´ê´€ (Resource Monitor)                â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
    â”‚                                                                   â”‚
    â”‚  ğŸ“ /opt/kingdom/                                               â”‚
    â”‚     â”œâ”€â”€ queue/           â† ì´ë²¤íŠ¸/ì‘ì—…/ë©”ì‹œì§€ í                  â”‚
    â”‚     â”œâ”€â”€ state/           â† ìƒíƒœ ì €ì¥ì†Œ                            â”‚
    â”‚     â”œâ”€â”€ logs/            â† ë¡œê·¸                                   â”‚
    â”‚     â””â”€â”€ memory/          â† ê³µìœ  ë©”ëª¨ë¦¬                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ì—­í•  ì²´ê³„

| ì—­í•  | í•œê¸€ | ì˜ë¬¸ ì½”ë“œëª… | tmux ì„¸ì…˜ | ìƒì„¸ ë¬¸ì„œ |
|------|------|-----------|-----------|----------|
| ì™¸ë¶€ ê²½ê³„ | íŒŒìˆ˜ê¾¼ | `sentinel` | `sentinel` | [roles/sentinel.md](roles/sentinel.md) |
| ì¤‘ì•™ ì¡°ìœ¨ | ì™• | `king` | `king` | [roles/king.md](roles/king.md) |
| ë„ë©”ì¸ ì „ë¬¸ê°€ | ì¥êµ° | `general` | `gen-{domain}` | [roles/general.md](roles/general.md) |
| ì‘ì—… ì‹¤í–‰ | ë³‘ì‚¬ | `soldier` | `soldier-{id}` | [roles/soldier.md](roles/soldier.md) |
| ëŒ€ì™¸ ì†Œí†µ | ì‚¬ì ˆ | `envoy` | `envoy` | [roles/envoy.md](roles/envoy.md) |
| ë‚´ë¶€ ê´€ë¦¬ | ë‚´ê´€ | `chamberlain` | `chamberlain` | [roles/chamberlain.md](roles/chamberlain.md) |

## ì‹œìŠ¤í…œ ì„¤ê³„

| ë¬¸ì„œ | ë‚´ìš© |
|------|------|
| [systems/message-passing.md](systems/message-passing.md) | ì´ë²¤íŠ¸ í, ì‘ì—… í, íŒŒì¼ ê¸°ë°˜ í†µì‹  |
| [systems/memory.md](systems/memory.md) | 3ê³„ì¸µ ë©”ëª¨ë¦¬ ê´€ë¦¬ ì „ëµ |
| [systems/logging.md](systems/logging.md) | ë¡œê¹… ì²´ê³„ & ê°œì„  í¬ì¸íŠ¸ ìˆ˜ì§‘ |
| [systems/data-lifecycle.md](systems/data-lifecycle.md) | ë°ì´í„° ìƒëª…ì£¼ê¸° & ì •ë¦¬ ì •ì±… |
| [systems/filesystem.md](systems/filesystem.md) | ë””ë ‰í† ë¦¬ êµ¬ì¡° & ë°ì´í„° íë¦„ |
| [systems/event-types.md](systems/event-types.md) | ì´ë²¤íŠ¸ íƒ€ì… ì¹´íƒˆë¡œê·¸ (SSOT) |
| [systems/internal-events.md](systems/internal-events.md) | ë‚´ë¶€ ì´ë²¤íŠ¸ ì¹´íƒˆë¡œê·¸ |

## ì¸í”„ë¼ & ìš´ì˜

| ë¬¸ì„œ | ë‚´ìš© |
|------|------|
| [infra/ec2-setup.md](infra/ec2-setup.md) | EC2 ìŠ¤í™, ì†Œí”„íŠ¸ì›¨ì–´, ì¸ì¦, ë¹„ìš© |
| [infra/roadmap.md](infra/roadmap.md) | êµ¬í˜„ ë¡œë“œë§µ (Phase 1-4) |

## í•µì‹¬ ì„¤ê³„ ê²°ì •

| # | ê²°ì • | ì„ íƒ | ì´ìœ  |
|---|------|------|------|
| 1 | tmux vs CC Native Task | **Hybrid** | tmuxëŠ” í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬, CC `-p`ëŠ” ì‘ì—… ì‹¤í–‰ |
| 2 | Webhook vs Polling | **Polling** | ê³µê°œ endpoint ë¶ˆí•„ìš”, ì¸í”„ë¼ ë‹¨ìˆœí™” |
| 3 | ì—­í•  ê°„ í†µì‹  | **íŒŒì¼ ê¸°ë°˜ JSON** | ë‹¨ìˆœ, ë””ë²„ê¹… ìš©ì´, ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ |
| 4 | ë™ì‹œ ì‹¤í–‰ | **ìµœëŒ€ 3 ë³‘ì‚¬** | M5.xlarge ê¸°ì¤€ ì•ˆì „ ë§ˆì§„ |
| 5 | ì™• vs ì¥êµ° ë¶„ë¦¬ | **3ë‹¨ ê³„ì¸µ ìœ ì§€** | "ë¬´ì—‡ì„/ëˆ„êµ¬ì—ê²Œ" vs "ì–´ë–»ê²Œ" ë¶„ë¦¬ â†’ í™•ì¥ì„± |

## ì‘ì—… ìš°ì„ ìˆœìœ„

1. **PR Review** (`gen-pr`) â€” friday í”ŒëŸ¬ê·¸ì¸ í™œìš©
2. **Unit Test ì‘ì„±** (`gen-test`) â€” ìƒˆë¡œìš´ ì›Œí¬í”Œë¡œìš° êµ¬ì„±
3. **Jira Ticket ëŒ€ì‘** (`gen-jira`) â€” sunday í”ŒëŸ¬ê·¸ì¸ í™œìš©
4. **Briefing** (`gen-briefing`) â€” ì •ê¸° ì‹œìŠ¤í…œ ìƒíƒœ ë¸Œë¦¬í•‘ (cron ìŠ¤ì¼€ì¤„)
5. ~~Code Refactoring~~ â€” ë¦¬ìŠ¤í¬ ë†’ì•„ í›„ìˆœìœ„

## ì°¸ê³  ë¬¸ì„œ

- [archive/confluence/](../archive/confluence/) â€” í”„ë¡œì íŠ¸ ì´ˆê¸° ì»¨ì…‰ ë¬¸ì„œ (íˆìŠ¤í† ë¦¬, ì‹¤ì œì™€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ)
